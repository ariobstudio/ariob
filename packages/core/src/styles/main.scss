@use 'sass:color';
@import './variables';
@import './mixins'; // Import mixins if needed globally (e.g., for body styles)

// --- Theme Variable Definition ---
:root {
  // Default to Light Theme if no preference detected or supported
  // Brand Colors
  --primary: #{$color-primary};       // now #121212
  --primary-rgb: #{$color-primary-rgb};
  --primary-contrast: #{$color-primary-contrast};
  --primary-hover: #{$gray-300};       // using updated gray ($gray-300: #2B2B2B)
  --primary-active: #{$gray-400};      // using updated gray ($gray-400: #121212)
  

  --secondary: #{$color-secondary};     // now #2B2B2B
  --secondary-rgb: #{$color-secondary-rgb};
  --secondary-contrast: #{$color-secondary-contrast};
  --secondary-hover: #{$gray-400};
  --secondary-active: #{$gray-300};

  // Status Colors (unchanged)
  --success: #{$color-success};
  --success-contrast: #{$color-success-contrast};
  --success-hover: #{$gray-300};
  --success-active: #{$gray-400};

  --warning: #{$color-warning};
  --warning-contrast: #{$color-warning-contrast};
  --warning-hover: #{$gray-300};
  --warning-active: #{$gray-400};

  --error: #{$color-error};
  --error-contrast: #{$color-error-contrast};
  --error-hover: #{$gray-300};
  --error-active: #{$gray-400};

  --info: #{$color-info};
  --info-contrast: #{$color-info-contrast};
  --info-hover: #{$gray-300};
  --info-active: #{$gray-400};

  // Light Theme Variables
  --bg-1: #{$bg-light-1};
  --bg-2: #{$bg-light-2};
  --bg-3: #{$bg-light-3};
  --bg-1-rgb: #{$bg-light-1-rgb};
  --bg-2-rgb: #{$bg-light-2-rgb};
  --bg-3-rgb: #{$bg-light-3-rgb};
  --bg-hover: #{$gray-100};
  --bg-active: #{$gray-200};
  --text-1: #{$text-light-1};
  --text-2: #{$text-light-2};
  --text-3: #{$text-light-3};
  --text-1-rgb: #{$text-light-1-rgb};
  --text-2-rgb: #{$text-light-2-rgb};
  --text-3-rgb: #{$text-light-3-rgb};
  --border: #{$border-light};
  --card-bg: #{$card-bg-light};
  --card-bg-rgb: #{$card-bg-light-rgb};

  // Material-like semantic colors
  --background: #{$bg-light-1};
  --surface: #{$bg-light-2};
  --surface-variant: #{$bg-light-3};
  --on-background: #{$text-light-1};
  --on-surface: #{$text-light-1};
  --on-surface-variant: #{$text-light-2};
  --outline: #{$border-light};
  --outline-variant: #{$border-light};

  // Shadows (Consistent across themes)
  --shadow-sm: #{$shadow-sm};
  --shadow-md: #{$shadow-md};
  --shadow-lg: #{$shadow-lg};
  --shadow-xl: #{$shadow-xl};
  --shadow-inset: #{$shadow-inset};

  // Spacing
  --space-0: #{$space-0};
  --space-1: #{$space-1};
  --space-2: #{$space-2};
  --space-3: #{$space-3};
  --space-4: #{$space-4};
  --space-5: #{$space-5};
  --space-6: #{$space-6};
  --space-8: #{$space-8};
  --space-10: #{$space-10};
  --space-12: #{$space-12};
  --space-16: #{$space-16};

  // Border Radius
  --radius-sm: #{$radius-sm};
  --radius-md: #{$radius-md};
  --radius-lg: #{$radius-lg};
  --radius-xl: #{$radius-xl};
  --radius-full: #{$radius-full};
}

@media (prefers-color-scheme: dark) {
  :root {
    // Dark Theme Overrides
    --bg-1: #{$bg-dark-1};
    --bg-2: #{$bg-dark-2};
    --bg-3: #{$bg-dark-3};
    --bg-1-rgb: #{$bg-dark-1-rgb};
    --bg-2-rgb: #{$bg-dark-2-rgb};
    --bg-3-rgb: #{$bg-dark-3-rgb};
    --text-1: #{$text-dark-1};
    --text-2: #{$text-dark-2};
    --text-3: #{$text-dark-3};
    --text-1-rgb: #{$text-dark-1-rgb};
    --text-2-rgb: #{$text-dark-2-rgb};
    --text-3-rgb: #{$text-dark-3-rgb};
    --border: #{$border-dark};
    --card-bg: #{$card-bg-dark};
    --card-bg-rgb: #{$card-bg-dark-rgb};

    // Material-like semantic colors
    --background: #{$bg-dark-1};
    --surface: #{$bg-dark-2};
    --surface-variant: #{$bg-dark-3};
    --on-background: #{$text-dark-1};
    --on-surface: #{$text-dark-1};
    --on-surface-variant: #{$text-dark-2};
    --outline: #{$border-dark};
    --outline-variant: #{$border-dark};

    // Brand Colors (invert for dark mode)
    --primary: #{$white};  // white used as primary in dark
    --primary-rgb: 255, 255, 255;
    --primary-contrast: #{$black};
    --secondary: #{$gray-200}; // using $gray-200: #B3B3B3 for secondary accent
    --secondary-rgb: 179, 179, 179;
    --secondary-contrast: #{$black};

    // Status Colors remain as defined
    --success: #{$color-success};
    --success-contrast: #{$color-success-contrast};
    --warning: #{$color-warning};
    --warning-contrast: #{$color-warning-contrast};
    --error: #{$color-error};
    --error-contrast: #{$color-error-contrast};
    --info: #{$color-info};
    --info-contrast: #{$color-info-contrast};
  }
}

// Optional: Add a class to force a theme
.theme-light {
  // Light Theme Variables (Repeat from :root)
  --bg-1: #{$bg-light-1};
  --bg-2: #{$bg-light-2};
  --bg-3: #{$bg-light-3};
  --bg-1-rgb: #{$bg-light-1-rgb};
  --bg-2-rgb: #{$bg-light-2-rgb};
  --bg-3-rgb: #{$bg-light-3-rgb};
  --text-1: #{$text-light-1};
  --text-2: #{$text-light-2};
  --text-3: #{$text-light-3};
  --text-1-rgb: #{$text-light-1-rgb};
  --text-2-rgb: #{$text-light-2-rgb};
  --text-3-rgb: #{$text-light-3-rgb};
  --border: #{$border-light};
  --card-bg: #{$card-bg-light};
  --card-bg-rgb: #{$card-bg-light-rgb};
  --background: #{$bg-light-1};
  --surface: #{$bg-light-2};
  --surface-variant: #{$bg-light-3};
  --on-background: #{$text-light-1};
  --on-surface: #{$text-light-1};
  --on-surface-variant: #{$text-light-2};
  --outline: #{$border-light};
  --outline-variant: #{$border-light};
}

.theme-dark {
  // Dark Theme Variables (Repeat from @media)
  --bg-1: #{$bg-dark-1};
  --bg-2: #{$bg-dark-2};
  --bg-3: #{$bg-dark-3};
  --bg-1-rgb: #{$bg-dark-1-rgb};
  --bg-2-rgb: #{$bg-dark-2-rgb};
  --bg-3-rgb: #{$bg-dark-3-rgb};
  --text-1: #{$text-dark-1};
  --text-2: #{$text-dark-2};
  --text-3: #{$text-dark-3};
  --text-1-rgb: #{$text-dark-1-rgb};
  --text-2-rgb: #{$text-dark-2-rgb};
  --text-3-rgb: #{$text-dark-3-rgb};
  --border: #{$border-dark};
  --card-bg: #{$card-bg-dark};
  --card-bg-rgb: #{$card-bg-dark-rgb};
  --background: #{$bg-dark-1};
  --surface: #{$bg-dark-2};
  --surface-variant: #{$bg-dark-3};
  --on-background: #{$text-dark-1};
  --on-surface: #{$text-dark-1};
  --on-surface-variant: #{$text-dark-2};
  --outline: #{$border-dark};
  --outline-variant: #{$border-dark};
}

// --- Base Typography ---
.text-heading {
  margin-bottom: $space-3;
  font-weight: $font-weight-semibold;
  line-height: $line-height-tight;
  color: var(--text-1);
}

.text-heading-1 { font-size: $font-size-xxxl; }
.text-heading-2 { font-size: $font-size-xxl; }
.text-heading-3 { font-size: $font-size-xl; }
.text-heading-4 { font-size: $font-size-lg; }
.text-heading-5 { font-size: $font-size-base; font-weight: $font-weight-medium; }
.text-heading-6 { font-size: $font-size-sm; font-weight: $font-weight-medium; }

.text-body {
  margin-bottom: $space-4;
  line-height: $line-height-loose;
}

.text-link {
  color: var(--primary);
  text-decoration: none;
  transition: color $transition-duration-fast;

  &:hover {
    color: color.adjust($color-primary, $lightness: -10%);
    text-decoration: underline;
  }
}

.divider {
  border: 0;
  border-top: $border-width-base solid var(--border);
  margin: $space-6 0;
}

// --- Basic Layout Primitives ---
.container {
  width: 100%;
  max-width: $breakpoint-xl;
  padding-left: $space-4;
  padding-right: $space-4;
  margin-left: auto;
  margin-right: auto;
}

// Header Example (Can be moved to its own component SCSS)
.header {
  width: 100%;
  height: 64px; // Or use spacing variable
  display: flex;
  align-items: center;
  border-bottom: $border-width-base solid var(--border);
  padding: 0 $space-4; // Use spacing variables

  .title {
    font-weight: $font-weight-semibold;
    font-size: $font-size-xl;
    color: var(--primary);
    letter-spacing: -0.02em;
  }
}

// Safe area utilities (Keep these)
.safe-area-top {
  padding-top: calc(env(safe-area-inset-top));
}

.safe-area-bottom {
  padding-bottom: calc(env(safe-area-inset-bottom));
}

// --- Utility Classes (Keep and ensure they use new variables) ---
// Example adaptations:
.p-1 { padding: $space-1; }
.p-2 { padding: $space-2; }
.p-3 { padding: $space-3; }
.p-4 { padding: $space-4; }
// ... etc for margin, gap ...

.m-1 { margin: $space-1; }
.m-2 { margin: $space-2; }
// ...

.mt-4 { margin-top: $space-4; }
.mb-4 { margin-bottom: $space-4; }
// ...

.gap-1 { gap: $space-1; }
.gap-2 { gap: $space-2; }
// ...

.rounded-sm { border-radius: var(--radius-sm); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-full { border-radius: var(--radius-full); }

.shadow-sm { box-shadow: var(--shadow-sm); }
.shadow-md { box-shadow: var(--shadow-md); }
.shadow-lg { box-shadow: var(--shadow-lg); }
.shadow-xl { box-shadow: var(--shadow-xl); }

.text-xs { font-size: $font-size-xs; }
.text-sm { font-size: $font-size-sm; }
.text-base { font-size: $font-size-base; } // Added for clarity
.text-lg { font-size: $font-size-lg; }
.text-xl { font-size: $font-size-xl; }
// ...

.font-medium { font-weight: $font-weight-medium; }
.font-semibold { font-weight: $font-weight-semibold; }
.font-bold { font-weight: $font-weight-bold; }

.text-primary { color: var(--primary); }
.text-secondary { color: var(--secondary); } // Added
.text-success { color: var(--success); }
.text-warning { color: var(--warning); }
.text-error { color: var(--error); }
.text-info { color: var(--info); }       // Added

.text-color-1 { color: var(--text-1); } // Semantic text colors
.text-color-2 { color: var(--text-2); }
.text-color-3 { color: var(--text-3); }

// Flex utilities (Keep as they are, they don't depend on vars directly)
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-start { align-items: flex-start; }
.items-center { align-items: center; }
.items-end { align-items: flex-end; }
.justify-start { justify-content: flex-start; }
.justify-center { justify-content: center; }
.justify-end { justify-content: flex-end; }
.justify-between { justify-content: space-between; }
.flex-grow { flex-grow: 1; } // Add grow/shrink
.flex-shrink { flex-shrink: 1; }
// ... add other flex utils as needed: wrap, basis, etc.

// --- Semantic Color Classes ---
.bg-background { background-color: var(--background); }
.bg-surface { background-color: var(--surface); }
.bg-surface-variant { background-color: var(--surface-variant); }
.bg-primary { background-color: var(--primary); }
.bg-secondary { background-color: var(--secondary); }
.bg-success { background-color: var(--success); }
.bg-warning { background-color: var(--warning); }
.bg-error { background-color: var(--error); }
.bg-info { background-color: var(--info); }
.text-on-background { color: var(--on-background); }
.text-on-surface { color: var(--on-surface); }
.text-on-surface-variant { color: var(--on-surface-variant); }
.text-on-primary { color: var(--primary-contrast); }

.border { border-width: 1px; }
.border-outline { border-color: var(--outline); }
.border-outline-variant { border-color: var(--outline-variant); }

// --- Utility Classes ---
// Spacing Utilities
.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-5 { padding: var(--space-5); }
.p-6 { padding: var(--space-6); }
.p-8 { padding: var(--space-8); }
.p-10 { padding: var(--space-10); }
.p-12 { padding: var(--space-12); }
.p-16 { padding: var(--space-16); }

// Padding X
.px-1 { padding-left: var(--space-1); padding-right: var(--space-1); }
.px-2 { padding-left: var(--space-2); padding-right: var(--space-2); }
.px-3 { padding-left: var(--space-3); padding-right: var(--space-3); }
.px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }
.px-5 { padding-left: var(--space-5); padding-right: var(--space-5); }
.px-6 { padding-left: var(--space-6); padding-right: var(--space-6); }
.px-8 { padding-left: var(--space-8); padding-right: var(--space-8); }
.px-10 { padding-left: var(--space-10); padding-right: var(--space-10); }
.px-12 { padding-left: var(--space-12); padding-right: var(--space-12); }
.px-16 { padding-left: var(--space-16); padding-right: var(--space-16); }

// Padding Y
.py-1 { padding-top: var(--space-1); padding-bottom: var(--space-1); }
.py-2 { padding-top: var(--space-2); padding-bottom: var(--space-2); }
.py-3 { padding-top: var(--space-3); padding-bottom: var(--space-3); }
.py-4 { padding-top: var(--space-4); padding-bottom: var(--space-4); }
.py-5 { padding-top: var(--space-5); padding-bottom: var(--space-5); }
.py-6 { padding-top: var(--space-6); padding-bottom: var(--space-6); }
.py-8 { padding-top: var(--space-8); padding-bottom: var(--space-8); }
.py-10 { padding-top: var(--space-10); padding-bottom: var(--space-10); }
.py-12 { padding-top: var(--space-12); padding-bottom: var(--space-12); }
.py-16 { padding-top: var(--space-16); padding-bottom: var(--space-16); }

// Margin
.m-1 { margin: var(--space-1); }
.m-2 { margin: var(--space-2); }
.m-3 { margin: var(--space-3); }
.m-4 { margin: var(--space-4); }
.m-5 { margin: var(--space-5); }
.m-6 { margin: var(--space-6); }
.m-8 { margin: var(--space-8); }
.m-10 { margin: var(--space-10); }
.m-12 { margin: var(--space-12); }
.m-16 { margin: var(--space-16); }

// Margin X
.mx-1 { margin-left: var(--space-1); margin-right: var(--space-1); }
.mx-2 { margin-left: var(--space-2); margin-right: var(--space-2); }
.mx-3 { margin-left: var(--space-3); margin-right: var(--space-3); }
.mx-4 { margin-left: var(--space-4); margin-right: var(--space-4); }
.mx-5 { margin-left: var(--space-5); margin-right: var(--space-5); }
.mx-6 { margin-left: var(--space-6); margin-right: var(--space-6); }
.mx-8 { margin-left: var(--space-8); margin-right: var(--space-8); }
.mx-10 { margin-left: var(--space-10); margin-right: var(--space-10); }
.mx-12 { margin-left: var(--space-12); margin-right: var(--space-12); }
.mx-16 { margin-left: var(--space-16); margin-right: var(--space-16); }

// Margin Y
.my-1 { margin-top: var(--space-1); margin-bottom: var(--space-1); }
.my-2 { margin-top: var(--space-2); margin-bottom: var(--space-2); }
.my-3 { margin-top: var(--space-3); margin-bottom: var(--space-3); }
.my-4 { margin-top: var(--space-4); margin-bottom: var(--space-4); }
.my-5 { margin-top: var(--space-5); margin-bottom: var(--space-5); }
.my-6 { margin-top: var(--space-6); margin-bottom: var(--space-6); }
.my-8 { margin-top: var(--space-8); margin-bottom: var(--space-8); }
.my-10 { margin-top: var(--space-10); margin-bottom: var(--space-10); }
.my-12 { margin-top: var(--space-12); margin-bottom: var(--space-12); }
.my-16 { margin-top: var(--space-16); margin-bottom: var(--space-16); }

// Margin Top
.mt-1 { margin-top: var(--space-1); }
.mt-2 { margin-top: var(--space-2); }
.mt-3 { margin-top: var(--space-3); }
.mt-4 { margin-top: var(--space-4); }
.mt-5 { margin-top: var(--space-5); }
.mt-6 { margin-top: var(--space-6); }
.mt-8 { margin-top: var(--space-8); }
.mt-10 { margin-top: var(--space-10); }
.mt-12 { margin-top: var(--space-12); }
.mt-16 { margin-top: var(--space-16); }

// Margin Bottom
.mb-1 { margin-bottom: var(--space-1); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-5 { margin-bottom: var(--space-5); }
.mb-6 { margin-bottom: var(--space-6); }
.mb-8 { margin-bottom: var(--space-8); }
.mb-10 { margin-bottom: var(--space-10); }
.mb-12 { margin-bottom: var(--space-12); }
.mb-16 { margin-bottom: var(--space-16); }

// Margin Left
.ml-1 { margin-left: var(--space-1); }
.ml-2 { margin-left: var(--space-2); }
.ml-3 { margin-left: var(--space-3); }
.ml-4 { margin-left: var(--space-4); }
.ml-5 { margin-left: var(--space-5); }
.ml-6 { margin-left: var(--space-6); }
.ml-8 { margin-left: var(--space-8); }
.ml-10 { margin-left: var(--space-10); }
.ml-12 { margin-left: var(--space-12); }
.ml-16 { margin-left: var(--space-16); }

// Margin Right
.mr-1 { margin-right: var(--space-1); }
.mr-2 { margin-right: var(--space-2); }
.mr-3 { margin-right: var(--space-3); }
.mr-4 { margin-right: var(--space-4); }
.mr-5 { margin-right: var(--space-5); }
.mr-6 { margin-right: var(--space-6); }
.mr-8 { margin-right: var(--space-8); }
.mr-10 { margin-right: var(--space-10); }
.mr-12 { margin-right: var(--space-12); }
.mr-16 { margin-right: var(--space-16); }

// Gap
.gap-1 { gap: var(--space-1); }
.gap-2 { gap: var(--space-2); }
.gap-3 { gap: var(--space-3); }
.gap-4 { gap: var(--space-4); }
.gap-5 { gap: var(--space-5); }
.gap-6 { gap: var(--space-6); }
.gap-8 { gap: var(--space-8); }
.gap-10 { gap: var(--space-10); }
.gap-12 { gap: var(--space-12); }
.gap-16 { gap: var(--space-16); }

// Border Radius
.rounded-sm { border-radius: var(--radius-sm); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-full { border-radius: var(--radius-full); }


// Width
.w-full { width: 100vw; }
.w-50 { width: 50%; }
.w-75 { width: 75%; }
.w-100 { width: 100%; }

// Height
.h-full { height: 100%; }
.h-50 { height: 50%; }
.h-75 { height: 75%; }
.h-100 { height: 100%; }

