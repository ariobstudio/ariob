// _mixins.scss
@import './variables';

// Basic Flexbox alignment
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-align-center {
  display: flex;
  align-items: center;
}

// Focus Ring styling (Accessibility)
@mixin focus-ring($color: var(--primary), $width: $input-focus-ring-width, $opacity: $input-focus-ring-opacity) {
  outline: none;
  box-shadow: 0 0 0 #{$width} rgba($color, $opacity);
}

@mixin focus-ring-inset($color: var(--primary), $width: $input-focus-ring-width, $opacity: $input-focus-ring-opacity) {
  outline: none;
  box-shadow: inset 0 0 0 #{$width} rgba($color, $opacity);
}

// Base styles for form controls (input, select, textarea)
@mixin form-control-base {
  display: block;
  width: 100%;
  min-height: $input-height-md;
  padding: $input-padding-y $input-padding-x;
  font-size: $font-size-base;
  font-weight: $font-weight-regular;
  line-height: $line-height-normal;
  color: var(--text-1);
  background-color: var(--bg-2);
  background-clip: padding-box;
  border: $border-width-base solid var(--border);
  transition: border-color $transition-duration-fast $transition-easing-default,
              box-shadow $transition-duration-fast $transition-easing-default;

  &::placeholder {
    color: var(--text-2);
  }

  &:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.15);
  }

  &:disabled,
  &[readonly] {
    background-color: var(--bg-3);
    opacity: 0.7;
    cursor: not-allowed;
  }
}


// Base button styles
@mixin button-base {
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  padding: $button-padding-y-md $button-padding-x-md;
  min-height: $button-min-height-md;
  font-family: $font-family-base;
  font-size: $font-size-base;
  font-weight: $font-weight-medium;
  line-height: $line-height-normal;
  text-align: center;
  text-decoration: none;
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  border: $border-width-base solid transparent;
  border-radius: $radius-md;
  transition: $transition-property-common $transition-duration-fast $transition-easing-default;

  &:disabled {
    pointer-events: none;
    opacity: 0.65;
  }

  &:focus-visible { // Modern focus styling
     outline: none;
     // Add a subtle ring INSIDE the button or slightly outside
     box-shadow: 0 0 0 2px var(--bg-1), 0 0 0 4px var(--primary);
  }
}

// Button Variant Generator
@mixin button-variant($bg, $text-color, $border-color: $bg, $hover-bg: darken($bg, 7.5%), $hover-text: $text-color, $hover-border: darken($border-color, 10%), $active-bg: darken($bg, 10%), $active-text: $text-color, $active-border: darken($border-color, 12.5%)) {
  background-color: $bg;
  color: $text-color;
  border-color: $border-color;

  &:not(:disabled):not(.disabled):hover {
    background-color: $hover-bg;
    border-color: $hover-border;
    color: $hover-text;
    transform: translateY(-1px); // Subtle lift
    box-shadow: var(--shadow-sm); // Add shadow on hover
  }

  &:not(:disabled):not(.disabled):active {
    background-color: $active-bg;
    border-color: $active-border;
    color: $active-text;
    transform: translateY(0px); // Settle back down
    box-shadow: var(--shadow-inset); // Press effect
  }
}

// Button Outline Variant Generator
@mixin button-outline-variant($color, $text-color: $color, $hover-bg: rgba($color, 0.1), $hover-text: $color, $active-bg: rgba($color, 0.15), $active-text: $color) {
  background-color: transparent;
  color: $text-color;
  border-color: $color;

  &:not(:disabled):not(.disabled):hover {
    background-color: $hover-bg;
    border-color: $color;
    color: $hover-text;
    transform: none; // No lift for outline
    box-shadow: none;
  }

  &:not(:disabled):not(.disabled):active {
    background-color: $active-bg;
    border-color: $color;
    color: $active-text;
    transform: none;
    box-shadow: none;
  }
}


@mixin box {
  display: flex;
  border-radius: $radius-md;
  width: 90%;
  margin-left: 5%;
  margin-right: 5%;
}

@mixin title {
  font-size: $font-size-xl;
  font-weight: $font-weight-semibold;
  line-height: $line-height-tight;
}

@mixin sub-title {
  font-size: $font-size-base;
  line-height: $line-height-normal;
}

@mixin text {
  font-size: $font-size-base;
  margin-left: 5%;
  align-self: center;
}

@mixin button {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: $radius-md;
  height: 44px;
  padding: $space-2 $space-4;
  font-size: $font-size-base;
  font-weight: $font-weight-medium;
  transition: background-color $transition-duration-fast $transition-easing-default;
  cursor: pointer;
  border: none;

  &:hover {
    background-color: var(--primary-dark);
  }

  &:active {
    background-color: var(--primary-darker);
  }

  &:disabled {
    opacity: 0.65;
    cursor: not-allowed;
  }
}

@mixin input-box {
  display: flex;
  align-items: center;
  height: 44px;
  padding: 0 $space-3;
  width: 100%;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--border);
  font-size: $font-size-base;
  color: var(--text-1);

  &::placeholder {
    color: var(--text-3);
  }

  &:focus {
    outline: none;
    border-bottom-color: var(--primary);
  }
}

@mixin card {
  display: flex;
  flex-direction: column;
  border-radius: $radius-lg;
  box-shadow: var(--shadow-sm);
  transition: box-shadow $transition-duration-normal $transition-easing-default,
              transform $transition-duration-normal $transition-easing-default;
}